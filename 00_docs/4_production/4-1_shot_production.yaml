meta:
  role: shot_production
  version: 1.0
  status: draft

schema:
  type: object
  required: [meta, inputs, content]
  properties:
    meta:
      type: object
      required: [role, version]
      properties:
        role: {type: string}
        version: {type: number}
        status: {type: string}
    inputs:
      type: object
      required: [from_docs]
      properties:
        from_docs:
          type: array
          items: {type: string}
    content:
      type: object
      required: [per_shot_execution]
      properties:
        per_shot_execution:
          type: array
          items:
            type: object
            required: [shot, tasks, outputs_to]
            properties:
              shot: {type: string}
              tasks:
                type: array
                items: {type: string}
              outputs_to: {type: string}

fields:
  - path: meta.role
    purpose: 文档角色标识
    type: string
    required: true
    default: shot_production
  - path: meta.version
    purpose: 模板版本
    type: number
    required: true
    default: 1.0
  - path: meta.status
    purpose: 文档状态
    type: string
    required: false
    default: draft
  - path: inputs.from_docs
    purpose: 上游依赖文档编号
    type: array[string]
    required: true
    default: []
  - path: content.per_shot_execution[].shot
    purpose: 镜头编号
    type: string
    required: true
    default: "shot001"
  - path: content.per_shot_execution[].tasks
    purpose: 执行任务列表
    type: array[string]
    required: true
    default: []
  - path: content.per_shot_execution[].outputs_to
    purpose: 输出目录
    type: string
    required: true
    default: "02_outputs/shots/shot001/"

inputs:
  from_docs:
    - "2-2_layout_freeze"
    - "3-1_lookdev"
    - "X-5_token_input"
    - "X-4_prompt_input"

content:
  per_shot_execution:
    - shot: "shot001"
      tasks: []
      outputs_to: "02_outputs/shots/shot001/"

example:
  meta: {role: shot_production, version: 1.0, status: draft}
  inputs:
    from_docs: ["2-2_layout_freeze", "3-1_lookdev", "X-5_token_input", "X-4_prompt_input"]
  content:
    per_shot_execution:
      - shot: "shot001"
        tasks: ["制作输出A", "校验输出B"]
        outputs_to: "02_outputs/shots/shot001/"
