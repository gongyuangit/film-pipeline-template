meta:
  role: segment_story_prompts
  version: 1.0
  status: draft

schema:
  type: object
  required: [meta, prompt, output_schema]
  properties:
    meta:
      type: object
      required: [role, version]
      properties:
        role: {type: string}
        version: {type: number}
        status: {type: string}
    prompt:
      type: object
      required: [positive, negative]
      properties:
        positive: {type: string}
        negative: {type: string}
    output_schema:
      type: object
      required: [beats, issues, pass]
      properties:
        beats:
          type: array
          items:
            type: object
            required: [id, description]
            properties:
              id: {type: string}
              description: {type: string}
        issues:
          type: array
          items: {type: string}
        pass: {type: boolean}

fields:
  - path: meta.role
    purpose: 文档角色标识
    type: string
    required: true
    default: segment_story_prompts
  - path: meta.version
    purpose: 模板版本
    type: number
    required: true
    default: 1.0
  - path: meta.status
    purpose: 文档状态
    type: string
    required: false
    default: draft
  - path: prompt.positive
    purpose: 正向提示词模板
    type: string
    required: true
    default: ""
  - path: prompt.negative
    purpose: 负向提示词模板
    type: string
    required: true
    default: ""
  - path: output_schema
    purpose: 期望输出字段结构
    type: object
    required: true
    default: {beats: [], issues: [], pass: false}

prompt:
  positive: |
    You are given segment structure and segment drama.
    Produce a beat list that is readable and causally coherent.
    Output YAML with beats, issues, and pass/fail recommendation.
  negative: |
    Do NOT mention camera, lens, framing, layout, lookdev, or production details.
output_schema:
  beats: [{id: "beat###", description: ""}]
  issues: []
  pass: false

example:
  meta: {role: segment_story_prompts, version: 1.0, status: draft}
  prompt:
    positive: "输出可读节拍清单，保持因果一致"
    negative: "避免任何镜头或制作描述"
  output_schema:
    beats: [{id: "beat001", description: "节拍占位"}]
    issues: ["无"]
    pass: true
