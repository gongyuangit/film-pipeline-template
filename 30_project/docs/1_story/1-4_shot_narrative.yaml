meta:
  role: shot_narrative
  version: 1.0
  status: draft

schema:
  type: object
  required: [meta, content]
  properties:
    meta:
      type: object
      required: [role, version]
      properties:
        role: {type: string}
        version: {type: number}
        status: {type: string}
    content:
      type: object
      required: [shots]
      properties:
        shots:
          type: array
          items:
            type: object
            required: [shot, segment, narrative_purpose, info_carried, continuity_requirements, risk]
            properties:
              shot: {type: string}
              segment: {type: string}
              narrative_purpose: {type: string}
              info_carried:
                type: array
                items: {type: string}
              continuity_requirements:
                type: array
                items: {type: string}
              risk:
                type: string
                enum: [low, medium, high]

fields:
  - path: meta.role
    purpose: 文档角色标识
    type: string
    required: true
    default: shot_narrative
  - path: meta.version
    purpose: 模板版本
    type: number
    required: true
    default: 1.0
  - path: meta.status
    purpose: 文档状态
    type: string
    required: false
    default: draft
  - path: content.shots[].shot
    purpose: 镜头编号
    type: string
    required: true
    default: "shot001"
  - path: content.shots[].segment
    purpose: 关联段落编号
    type: string
    required: true
    default: "segment001"
  - path: content.shots[].narrative_purpose
    purpose: 镜头叙事目的
    type: string
    required: true
    default: ""
  - path: content.shots[].info_carried
    purpose: 镜头携带的信息点
    type: array[string]
    required: true
    default: []
  - path: content.shots[].continuity_requirements
    purpose: 连续性要求
    type: array[string]
    required: true
    default: []
  - path: content.shots[].risk
    purpose: 风险等级
    type: string
    required: true
    default: low

content:
  shots:
    - shot: "shot001"
      segment: "segment001"
      narrative_purpose: ""
      info_carried: []
      continuity_requirements: []
      risk: "low"

example:
  meta: {role: shot_narrative, version: 1.0, status: draft}
  content:
    shots:
      - shot: "shot001"
        segment: "segment001"
        narrative_purpose: "传达关键转折"
        info_carried: ["信息点A"]
        continuity_requirements: ["保持道具位置一致"]
        risk: "medium"
