meta:
  role: lookdev
  version: 1.0
  status: draft

schema:
  type: object
  required: [meta, inputs, content]
  properties:
    meta:
      type: object
      required: [role, version]
      properties:
        role: {type: string}
        version: {type: number}
        status: {type: string}
    inputs:
      type: object
      required: [from_docs]
      properties:
        from_docs:
          type: array
          items: {type: string}
    content:
      type: object
      required: [global_style, per_shot_notes]
      properties:
        global_style:
          type: object
          required: [keywords, color_mood, lighting]
          properties:
            keywords:
              type: array
              items: {type: string}
            color_mood:
              type: array
              items: {type: string}
            lighting:
              type: array
              items: {type: string}
        per_shot_notes:
          type: array
          items:
            type: object
            required: [shot, notes]
            properties:
              shot: {type: string}
              notes:
                type: array
                items: {type: string}

fields:
  - path: meta.role
    purpose: 文档角色标识
    type: string
    required: true
    default: lookdev
  - path: meta.version
    purpose: 模板版本
    type: number
    required: true
    default: 1.0
  - path: meta.status
    purpose: 文档状态
    type: string
    required: false
    default: draft
  - path: inputs.from_docs
    purpose: 上游依赖文档编号
    type: array[string]
    required: true
    default: []
  - path: content.global_style
    purpose: 全局风格定义
    type: object
    required: true
    default: {keywords: [], color_mood: [], lighting: []}
  - path: content.per_shot_notes[].shot
    purpose: 镜头编号
    type: string
    required: true
    default: "shot001"
  - path: content.per_shot_notes[].notes
    purpose: 镜头视觉备注
    type: array[string]
    required: true
    default: []

inputs:
  from_docs:
    - "0-4_visual_direction"
    - "2-2_layout_freeze"
    - "X-3_lookdev_prompts"
    - "X-4_prompt_input"
    - "X-5_token_input"

content:
  global_style:
    keywords: []
    color_mood: []
    lighting: []
  per_shot_notes:
    - shot: "shot001"
      notes: []

example:
  meta: {role: lookdev, version: 1.0, status: draft}
  inputs:
    from_docs: ["0-4_visual_direction", "2-2_layout_freeze", "X-3_lookdev_prompts", "X-4_prompt_input", "X-5_token_input"]
  content:
    global_style:
      keywords: ["清晰", "干净"]
      color_mood: ["冷暖对比"]
      lighting: ["柔和漫反射"]
    per_shot_notes:
      - shot: "shot001"
        notes: ["主体突出", "背景简化"]
